!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t){e.exports.maxScreenWidth=1920,e.exports.maxScreenHeight=1080,e.exports.serverUpdateRate=10,e.exports.maxPlayers=70,e.exports.collisionDepth=6,e.exports.minimapRate=3e3,e.exports.clientSendRate=7,e.exports.healthBarWidth=52,e.exports.healthBarPad=4.5,e.exports.iconPadding=15,e.exports.chatCountdown=3e3,e.exports.chatCooldown=500,e.exports.maxAge=15,e.exports.killScore=100,e.exports.gatherAngle=Math.PI/2.6,e.exports.gatherWiggle=10,e.exports.hitReturnRatio=.25,e.exports.hitAngle=Math.PI/2,e.exports.playerScale=35,e.exports.playerSpeed=.23,e.exports.playerDecel=.33,e.exports.nameY=34,e.exports.resourceTypes=["wood","food","stone","points"],e.exports.areaCount=7,e.exports.treesPerArea=10,e.exports.bushesPerArea=3,e.exports.totalRocks=32,e.exports.goldOres=7,e.exports.treeScales=[140,145,150,155],e.exports.bushScales=[80,85,90],e.exports.rockScales=[80,85,90],e.exports.maxNameLength=15,e.exports.mapScale=12e3},function(e,t){e.exports=function(e){this.sid=e,this.init=function(e,t,i,n,s,a,o){a=a||{},this.sentTo={},this.active=!0,this.x=e,this.y=t,this.dir=i,this.xWiggle=0,this.yWiggle=0,this.scale=n,this.type=s,this.id=a.id,this.owner=o,this.isItem=void 0!=this.id,this.group=a.group,this.health=a.health,this.layer=2,void 0!=this.group?this.layer=this.group.layer:0==this.type?this.layer=3:2==this.type&&(this.layer=0),this.colDiv=a.colDiv||1,this.ignoreCollision=a.ignoreCollision,this.hideFromEnemy=a.hideFromEnemy,this.dmg=a.dmg,this.pps=a.pps,this.turnSpeed=a.turnSpeed,this.req=a.req,this.trap=a.trap,this.boostSpeed=a.boostSpeed},this.changeHealth=function(e,t){return this.health+=e,this.health<=0},this.getScale=function(e){return e=e||1,this.scale*(this.isItem||2==this.type||3==this.type?1:.74*e)*this.colDiv},this.visibleToPlayer=function(e){return!this.hideFromEnemy||this.owner&&(this.owner==e||this.owner.team&&e.team==this.owner.team)},this.update=function(e){this.active&&(this.xWiggle&&(this.xWiggle*=Math.pow(.99,e)),this.yWiggle&&(this.yWiggle*=Math.pow(.99,e)),this.turnSpeed&&(this.dir+=this.turnSpeed*e))}}},function(e,t){e.exports.groups=[{id:0,name:"food",layer:0},{id:1,name:"walls",place:!0,limit:20,layer:0},{id:2,name:"spikes",place:!0,limit:10,layer:0},{id:3,name:"mill",place:!0,limit:5,layer:1},{id:4,name:"mine",place:!0,limit:1,layer:0},{id:5,name:"trap",place:!0,limit:5,layer:-1},{id:6,name:"booster",place:!0,limit:12,layer:-1}],t.weapons=[{id:0,name:"basic axe",desc:"tool for gathering resources",dmg:25,range:65,gather:1,speed:300},{id:1,name:"great axe",desc:"gathers resources at a higher rate",age:2,dmg:30,spdMult:1,range:70,gather:2,speed:400},{id:2,name:"short sword",desc:"increased attack power but slower gathering speed",holdOffset:5,age:2,dmg:35,spdMult:.85,range:95,gather:1,speed:300}],e.exports.list=[{id:0,group:e.exports.groups[0],name:"apple",desc:"restores 20 health when consumed",req:["food",10],consume:function(e){return e.changeHealth(20)},scale:22,holdOffset:15},{id:1,age:3,group:e.exports.groups[0],name:"cookie",desc:"restores 40 health when consumed",req:["food",15],consume:function(e){return e.changeHealth(40)},scale:27,holdOffset:15},{id:2,group:e.exports.groups[1],name:"wood wall",desc:"provides protection for your village",req:["wood",15],health:350,scale:50,holdOffset:20,placeOffset:-5},{id:3,age:3,group:e.exports.groups[1],name:"stone wall",desc:"provides improved protection for your village",req:["stone",25],health:700,scale:50,holdOffset:20,placeOffset:-5},{id:4,group:e.exports.groups[2],name:"spikes",desc:"damages enemies when they touch them",req:["wood",20,"stone",5],health:400,dmg:20,scale:49,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:5,age:5,group:e.exports.groups[2],name:"greater spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",10],health:500,dmg:40,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:6,group:e.exports.groups[3],name:"windmill",desc:"generates gold over time",req:["wood",50,"stone",10],health:400,pps:1,turnSpeed:.0016,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5},{id:7,age:5,group:e.exports.groups[3],name:"faster windmill",desc:"generates more gold over time",req:["wood",60,"stone",20],health:500,pps:1.5,turnSpeed:.0025,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5},{id:8,group:e.exports.groups[4],type:2,name:"mine",desc:"allows you to mine stone",req:["wood",20,"stone",100],iconLineMult:12,scale:65,holdOffset:20,placeOffset:0},{id:9,age:4,group:e.exports.groups[5],name:"pit trap",desc:"pit that traps enemies if they walk over it",req:["wood",30,"stone",30],trap:!0,ignoreCollision:!0,hideFromEnemy:!0,health:700,colDiv:.15,scale:50,holdOffset:20,placeOffset:-5},{id:10,age:4,group:e.exports.groups[6],name:"boost pad",desc:"provides boost when stepped on",req:["stone",40,"wood",5],ignoreCollision:!0,boostSpeed:300,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5}]},function(e,t){e.exports={}},function(e,t){e.exports=function(e,t,i){this.objects=t;var n;this.add=function(i,s,a,o,l,r,c,h,d){n=null;for(var u=0;u<t.length;++u)if(t[u].sid==i){n=t[u];break}if(!n)for(var u=0;u<t.length;++u)if(!t[u].active){n=t[u];break}n||(n=new e(i),t.push(n)),h&&(n.sid=i),n.init(s,a,o,l,r,c,d)},this.disableBySid=function(e){for(var i=0;i<t.length;++i)if(t[i].sid==e){t[i].active=!1;break}},this.removeAllItems=function(e,i){for(var n=0;n<t.length;++n)t[n].active&&t[n].owner&&t[n].owner.sid==e&&(t[n].active=!1);i&&i.emit("13",e)},this.checkItemLocation=function(e,n,s,a){for(var o=0;o<t.length;++o)if(t[o].active&&i.getDistance(e,n,t[o].x,t[o].y)<s+t[o].getScale(a))return!1;return!0}}},function(e,t){e.exports=function(e,t,i,n,s,a,o,l){this.id=e,this.sid=t,this.tmpScore=0,this.team=null,this.skinIndex=0,this.skins={},this.points=0,this.dt=0,this.hidden=!1,this.spawn=function(){this.active=!0,this.alive=!0,this.lockMove=!1,this.showMinimap=!1,this.chatCountdown=0,this.sentTo={},this.itemCounts={},this.gathering=0,this.autoGather=0,this.animTime=0,this.animSpeed=0,this.mouseState=0,this.buildIndex=-1,this.weaponIndex=0,this.maxXP=300,this.XP=0,this.age=1,this.upgrAge=2,this.upgradePoints=0,this.x=0,this.y=0,this.xVel=0,this.yVel=0,this.slowMult=1,this.dir=0,this.dirPlus=0,this.targetDir=0,this.targetAngle=0,this.maxHealth=990,this.health=this.maxHealth,this.scale=i.playerScale,this.speed=i.playerSpeed,this.gatherCountdown=0,this.resetKeys(),this.resetResources(),this.items=[0,2,4,6,8]},this.resetResources=function(){for(var e=0;e<i.resourceTypes.length;++e)this[i.resourceTypes[e]]=this[i.resourceTypes[e]]?Math.round(this[i.resourceTypes[e]]/4):0},this.setWeapon=function(e){a.weapons[e]&&(this.weaponIndex=e)},this.addItem=function(e){var t=a.list[e];if(t){for(var i=0;i<this.items.length;++i)if(a.list[this.items[i]].group==t.group)return this.buildIndex==this.items[i]&&(this.buildIndex=e),this.items[i]=e,!0;return this.items.push(e),!0}return!1},this.setUserData=function(e){e&&(this.name="unknown",n.isString(e.name)&&e.name.length<=i.maxNameLength&&(e.name=e.name.replace(/<|>/g,"").replace(/[^\x00-\x7F]/g,""),e.name.replace(/\s/g,"").length>0&&(this.name=e.name)))},this.resetKeys=function(){this.keys={u:0,d:0,l:0,r:0}},this.getData=function(){return[this.id,this.sid,this.name,n.fixTo(this.x,2),n.fixTo(this.y,2),n.fixTo(this.dir,3),this.health,this.maxHealth,this.scale]},this.setData=function(e){this.id=e[0],this.sid=e[1],this.name=e[2],this.x=e[3],this.y=e[4],this.dir=e[5],this.health=e[6],this.maxHealth=e[7],this.scale=e[8]};var r=0;this.update=function(e,t){if(this.alive){if(this.skin&&this.skin.healthRegen&&(r-=t)<=0&&(this.changeHealth(this.skin.healthRegen),r=1e3),this.slowMult<1&&(this.slowMult+=8e-4*t,this.slowMult>1&&(this.slowMult=1)),this.lockMove)this.xVel=0,this.yVel=0;else{var o=(this.buildIndex>=0?.5:1)*(a.weapons[this.weaponIndex].spdMult||1)*(this.skin?this.skin.spdMult||1:1)*this.slowMult,l=-this.keys.l+this.keys.r,c=-this.keys.u+this.keys.d,h=Math.sqrt(l*l+c*c);0!=h&&(l/=h,c/=h),l&&(this.xVel+=l*this.speed*o*t),c&&(this.yVel+=c*this.speed*o*t)}this.lockMove=!1;for(var d=n.getDistance(0,0,this.xVel,this.yVel),u=Math.max(1,Math.round(d/30)),m=1/u,p=0;p<u;++p){this.xVel&&(this.x+=this.xVel*m),this.yVel&&(this.y+=this.yVel*m);for(var f=0;f<s.objects.length;++f)s.objects[f].active&&this.checkCollision(s.objects[f],m)}for(var p=0;p<e.length;++p)e[p]!=this&&e[p].alive&&this.checkCollision(e[p]);this.xVel&&(this.xVel*=i.playerDecel),this.yVel&&(this.yVel*=i.playerDecel),this.x-this.scale<0?this.x=this.scale:this.x+this.scale>i.mapScale&&(this.x=i.mapScale-this.scale),this.y-this.scale<0?this.y=this.scale:this.y+this.scale>i.mapScale&&(this.y=i.mapScale-this.scale),this.buildIndex<0&&(this.gatherCountdown>0?(this.gatherCountdown-=t,this.gathering=this.mouseState):(this.gathering||this.autoGather)&&this.gather(e))}},this.earnXP=function(e){this.age<i.maxAge&&(this.XP+=e,this.XP>=this.maxXP?(this.age<i.maxAge?(this.age++,this.XP=0,this.maxXP*=1.2):this.XP=this.maxXP,this.upgradePoints++,o.to(this.id).emit("16",this.upgradePoints,this.upgrAge),o.to(this.id).emit("15",this.XP,n.fixTo(this.maxXP,1),this.age)):o.to(this.id).emit("15",this.XP))},this.changeHealth=function(e,t,i){return!(e>0&&this.health>=this.maxHealth)&&(e<0&&this.skin&&(e*=this.skin.dmgMult||1,!i&&t&&t.alive&&this.skin.dmg&&t.changeHealth(e*this.skin.dmg,this,!0)),this.health+=e,this.health>this.maxHealth&&(this.health=this.maxHealth),this.health<=0&&this.kill(t),o.emit("10",this.sid,Math.round(this.health)),!0)},this.kill=function(e){e&&l(e,i.killScore),this.alive=!1,o.to(this.id).emit("11"),s.removeAllItems(this.sid,o)},this.addResource=function(e,t){3==e?l(this,t,!0):(this[i.resourceTypes[e]]+=t,o.to(this.id).emit("9",i.resourceTypes[e],this[i.resourceTypes[e]],1))},this.changeItemCount=function(e,t){this.itemCounts[e]=this.itemCounts[e]||0,this.itemCounts[e]+=t,o.to(this.id).emit("14",e,this.itemCounts[e])},this.buildItem=function(e){var t=this.scale+e.scale+(e.placeOffset||0),n=this.x+t*Math.cos(this.dir),a=this.y+t*Math.sin(this.dir);if(this.canBuild(e)&&(e.consume||s.checkItemLocation(n,a,e.scale,.6))){var o=!1;if(e.consume?o=e.consume(this):(o=!0,e.group.limit&&this.changeItemCount(e.group.id,1),s.add(s.objects.length,n,a,this.dir,e.scale,e.type,e,!1,this)),o){for(var l=0;l<e.req.length;)this.addResource(i.resourceTypes.indexOf(e.req[l]),-e.req[l+1]),l+=2;this.buildIndex=-1}}},this.canBuild=function(e){if(e.group.limit&&this.itemCounts[e.group.id]>=e.group.limit)return!1;for(var t=0;t<e.req.length;){if(this[e.req[t]]<e.req[t+1])return!1;t+=2}return!0},this.gather=function(e){this.gathering=this.mouseState,this.gatherCountdown=a.weapons[this.weaponIndex].speed*(this.skin?this.skin.atkSpd||1:1),this.slowMult-=.3,this.slowMult<0&&(this.slowMult=0);for(var t,l,r,c=0;c<s.objects.length;++c)if(l=s.objects[c],l.active&&l.visibleToPlayer(this)&&n.getDistance(this.x,this.y,l.x,l.y)-l.scale<=a.weapons[this.weaponIndex].range&&(t=n.getDirection(l.x,l.y,this.x,this.y),n.getAngleDist(t,this.dir)<=i.gatherAngle)){if(l.health){if(l.changeHealth(-a.weapons[this.weaponIndex].dmg,this)){for(var h=0;h<l.req.length;)this.addResource(i.resourceTypes.indexOf(l.req[h]),l.req[h+1]),h+=2;l.active=!1}}else this.earnXP(4*a.weapons[this.weaponIndex].gather),this.addResource(l.type,a.weapons[this.weaponIndex].gather);r=!0;for(var d=0;d<e.length;++d)e[d].active&&s.objects[c].sentTo[this.id]&&(l.active?e[d].canSee(l)&&o.to(e[d].id).emit("8",n.fixTo(t,1),l.sid):(o.to(e[d].id).emit("12",l.sid),l.owner==e[d]&&e[d].changeItemCount(l.group.id,-1)))}for(var c=0;c<e.length;++c)(l=e[c])==this||!l.alive||l.team&&l.team==this.team||n.getDistance(this.x,this.y,l.x,l.y)-1.8*l.scale<=a.weapons[this.weaponIndex].range&&(t=n.getDirection(l.x,l.y,this.x,this.y),n.getAngleDist(t,this.dir)<=i.gatherAngle&&(l.xVel+=35*Math.cos(t),l.yVel+=35*Math.sin(t),this.skin&&this.skin.healD&&this.changeHealth(a.weapons[this.weaponIndex].dmg*this.skin.healD),l.changeHealth(-a.weapons[this.weaponIndex].dmg,this)));for(var c=0;c<e.length;++c)this.canSee(e[c])&&this.sentTo[e[c].id]&&o.to(e[c].id).emit("7",this.sid,r?1:0)};var c=0,h=0;this.animate=function(e){this.animTime>0&&(this.animTime-=e,this.animTime<=0?(this.animTime=0,this.dirPlus=0,c=0,h=0):0==h?(c+=e/(a.weapons[this.weaponIndex].speed*i.hitReturnRatio),this.dirPlus=n.lerp(0,this.targetAngle,c),c>=1&&(c=1,h=1)):(c-=e/(a.weapons[this.weaponIndex].speed*(1-i.hitReturnRatio)),this.dirPlus=n.lerp(0,this.targetAngle,c)))},this.startAnim=function(e){this.animTime=a.weapons[this.weaponIndex].speed,this.targetAngle=e?-i.hitAngle:-Math.PI},this.checkCollision=function(e,t){t=t||1;var i=this.x-e.x,s=this.y-e.y,a=this.scale+(e.getScale?e.getScale():e.scale);if(Math.sqrt(i*i+s*s)<a){if(e.ignoreCollision)!e.trap||e.owner==this||e.owner&&e.owner.team&&e.owner.team==this.team?e.boostSpeed&&(this.xVel+=t*e.boostSpeed*Math.cos(e.dir),this.yVel+=t*e.boostSpeed*Math.sin(e.dir)):(this.lockMove=!0,e.hideFromEnemy=!1);else{var o=n.getDirection(this.x,this.y,e.x,e.y),l=n.getDistance(this.x,this.y,e.x,e.y);this.xVel+=(a-l)*Math.cos(o),this.yVel+=(a-l)*Math.sin(o),this.x=e.x+a*Math.cos(o),this.y=e.y+a*Math.sin(o),!e.dmg||e.owner==this||e.owner&&e.owner.team&&e.owner.team==this.team||(this.changeHealth(-e.dmg,e.owner,!0),this.xVel+=180*Math.cos(o),this.yVel+=180*Math.sin(o))}return!0}return!1},this.canSee=function(e){if(!e)return!1;var t=Math.abs(e.x-this.x)-e.scale,n=Math.abs(e.y-this.y)-e.scale;return t<=i.maxScreenWidth/2*1.3&&n<=i.maxScreenHeight/2*1.3}}},function(e,t){e.exports=[{id:8,name:"Bummle Hat",price:100,scale:120,desc:"no effect"},{id:2,name:"Straw Hat",price:500,scale:120,desc:"no effect"},{id:5,name:"Cowboy Hat",price:1e3,scale:120,desc:"no effect"},{id:4,name:"Ranger Hat",price:2e3,scale:120,desc:"no effect"},{id:15,name:"Winter Cap",price:2e3,scale:120,desc:"no effect"},{id:18,name:"Explorer Hat",price:2e3,scale:120,desc:"no effect"},{id:1,name:"Marksman Cap",price:3e3,scale:120,desc:"no effect"},{id:6,name:"Soldier Helmet",price:5e3,scale:120,desc:"reduces damage taken but slows movement",spdMult:.9,dmgMult:.75},{id:13,name:"Honeycrisp Hat",price:5e3,scale:110,desc:"slowly regenerates health over time",healthRegen:10},{id:9,name:"Miners Helmet",price:5e3,scale:120,desc:"no effect"},{id:12,name:"Booster Hat",price:6e3,scale:120,desc:"increases your movement speed",spdMult:1.12},{id:10,name:"Bush Gear",price:1e4,scale:160,desc:"allows you to disguise yourself as a bush"},{id:11,name:"Spike Gear",price:1e4,scale:120,desc:"deal damage to players that damage you",dmg:.5},{id:16,name:"Bushido Armor",price:15e3,scale:120,desc:"restores health when you deal damage",healD:.4},{id:20,name:"Samurai Armor",price:15e3,scale:120,desc:"increased attack speed but slower movement",atkSpd:.85,spdMult:.96}]},function(e,t,i){"use strict";function n(e){Ue=ze||"52.28.101.58",Ge||(Ge=io.connect("http://"+Ue+":5001",{reconnection:!1,query:"man="+(ze?1:0)+"&k=H4HZv"})),Ge.on("disconnect",function(){e("disconnected")}),Ge.once("connect",function(){e(),K()})}function s(){return Ge&&Je}function a(){Ue&&window.history.replaceState("moomoo party","MooMoo","?party="+Ue)}function o(e,t){Ne&&localStorage.setItem(e,t)}function l(e){return Ne?localStorage.getItem(e):null}function r(e){dt=e.teams,_t=e.time}function c(e){Je=!1,Ge.close(),h(e)}function h(e){yt.style.display="block",bt.style.display="none",xt.style.display="none",It.style.display="block",It.innerHTML=e}function d(e,t,i){if(tt&&e){Et.style.display="block";var n="<div id='itemInfoName'>"+UTILS.capitalizeFirst(e.name)+"</div>";if(n+="<div id='itemInfoDesc'>"+e.desc+"</div>",i);else if(t);else{for(var s=0;s<e.req.length;)n+="<div class='itemInfoReq'>"+e.req[s]+"<span class='itemInfoReqVal'> x"+e.req[s+1]+"</span></div>",s+=2;e.group.limit&&(n+="<div class='itemInfoLmt'>"+(tt.itemCounts[e.group.id]||0)+"/"+e.group.limit+"</div>")}Et.innerHTML=n}else Et.style.display="none"}function u(e,t){Zt.push({sid:e,name:t}),m()}function m(){if(Zt[0]){var e=Zt[0],t="<div class='notificationText'>"+e.name+"</div><div class='notifButton' onclick='aJoinReq(0)'><i class='material-icons' style='font-size:28px;color:#cc5151;'>&#xE14C;</i></div><div class='notifButton' onclick='aJoinReq(1)'><i class='material-icons' style='font-size:28px;color:#8ecc51;'>&#xE876;</i></div>";jt.innerHTML=t,jt.style.display="block"}else jt.style.display="none"}function p(e){dt.push(e),"block"==Rt.style.display&&w()}function f(e,t){tt&&(tt.team=e,tt.isOwner=t,"block"==Rt.style.display&&w())}function g(e){$t=e,"block"==Rt.style.display&&w()}function y(e){for(var t=dt.length-1;t>=0;t--)dt[t].sid==e&&dt.splice(t,1);"block"==Rt.style.display&&w()}function v(){z(),"block"!=Rt.style.display?w():Rt.style.display="none"}function w(){if(tt&&tt.alive){q(),Xt.style.display="none",Ot.style.display="none",Rt.style.display="block";var e,t="";if(tt.team)for(var i=0;i<$t.length;)e=tt.isOwner&&$t[i]!=tt.sid?"<div class='joinAlBtn' onclick='kickFromClan("+$t[i]+")'>Kick</div>":"",t+="<div class='allianceItem' style='color:"+($t[i]==tt.sid?"#fff":"rgba(255,255,255,0.6)")+"'>"+$t[i+1]+e+"</div>",i+=2;else if(dt.length)for(var i=0;i<dt.length;++i)e=tt.team?"":"<div class='joinAlBtn' onclick='sendJoin("+i+")'>Join</div>",t+="<div class='allianceItem' style='color:"+(dt[i].sid==tt.team?"#fff":"rgba(255,255,255,0.6)")+"'>"+dt[i].sid+e+"</div>";else t+="<div class='allianceItem'>No Tribes Yet</div>";qt.innerHTML=t,t="",tt.team?t+="<div onclick='leaveAlliance();' class='allianceButtonM' style='width:360px;'>"+(tt.isOwner?"Delete Tribe":"Leave Tribe")+"</div>":t+="<input id='allianceInput' maxlength='6' style='width:200px;margin-right:10px;' placeholder='unique name'></input><div onclick='createAlliance()' class='allianceButtonM' style='width:140px;'>Create</div>",Ut.innerHTML=t}}function x(e){Ge.emit("11",Zt[0].sid,e),Zt.splice(0,1),m()}function I(e){Ge.emit("12",e)}function b(e){Ge.emit("10",dt[e].sid)}function k(){Ge.emit("8",document.getElementById("allianceInput").value)}function S(){Zt=[],m(),Ge.emit("9")}function M(){"block"!=Ot.style.display?(Ot.style.display="block",Rt.style.display="none",Xt.style.display="none",Ge.emit("mm",1)):(Ot.style.display="none",Ge.emit("mm",0))}function T(e){if(tt&&tt.alive&&"block"==Ot.style.display&&(Vt.clearRect(0,0,Wt.width,Wt.height),Vt.fillStyle="#fff",ye(tt.x/Oe.mapScale*Wt.width,tt.y/Oe.mapScale*Wt.height,4,Vt,!0),Vt.fillStyle="#d3d3d3",tt.team&&e))for(var t=0;t<e.length;)ye(e[t]/Oe.mapScale*Wt.width,e[t+1]/Oe.mapScale*Wt.height,4,Vt,!0),t+=2}function B(){z(),"block"!=Xt.style.display?(Xt.style.display="block",Ot.style.display="none",Rt.style.display="none",P()):Xt.style.display="none"}function C(e,t){e?tt.skinIndex=t:tt.skins[t]=1,"block"==Xt.style.display&&P()}function P(){if(tt){for(var e,t="",i=0;i<zt.length;++i)e=tt.skins[zt[i].id]?tt.skinIndex==zt[i].id?"<div class='joinAlBtn' style='margin-top: 5px' onclick=storeEquip(0);>Unequip</div>":"<div class='joinAlBtn' style='margin-top: 5px' onclick=storeEquip("+zt[i].id+");>Equip</div>":"<div class='joinAlBtn' style='margin-top: 5px' onclick=storeBuy("+zt[i].id+");>Buy</div><span class='itemPrice'>"+zt[i].price+"</span>",t+="<div id='storeDisplay"+i+"' class='storeItem' onmouseout='showItemInfo()'><img src='../img/hats/hat_"+zt[i].id+".png' class='hatPreview'></img>"+zt[i].name+e+"</div>";Ft.innerHTML=t;for(var i=0;i<zt.length;++i)!function(e){document.getElementById("storeDisplay"+e).onmouseover=function(){d(zt[e],!1,!0)}}(i)}}function E(e){Ge.emit("13",0,e)}function A(e){Ge.emit("13",1,e)}function H(){Xt.style.display="none",Rt.style.display="none",Ot.style.display="none",q()}function L(){for(var e="",t=0;t<Ve.list.length;++t)e+="<div id='actionBarItem"+t+"' onmouseout='showItemInfo()' class='actionBarItem'><img draggable='false' id='actionBarIcon"+t+"'></img></div>";for(var t=0;t<Ve.weapons.length;++t){var i=Ve.list.length+t;e+="<div id='actionBarItem"+i+"' class='actionBarItem' style='display:none'><img draggable='false' id='actionBarIcon"+i+"'></img></div>"}kt.innerHTML=e;for(var t=0;t<Ve.list.length+Ve.weapons.length;++t)!function(e){var t=document.createElement("canvas");t.width=t.height=66;var i=t.getContext("2d");if(i.translate(t.width/2,t.height/2),i.imageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.mozImageSmoothingEnabled=!1,Ve.list[e]){var n=fe(Ve.list[e],!0),s=Math.min(t.width-Oe.iconPadding,n.width);i.globalAlpha=1,i.drawImage(n,-s/2,-s/2,s,s),document.getElementById("actionBarIcon"+e).src=t.toDataURL();var a=document.getElementById("actionBarItem"+e);a.onmouseover=function(){d(Ve.list[e])},a.onclick=function(){Y(e)}}else i.lineWidth=3,i.translate(-10,5),i.rotate(1.3*Math.PI),i.strokeStyle=Jt,i.globalAlpha=1,me(Ve.weapons[e-Ve.list.length],0,0,i,!0),document.getElementById("actionBarIcon"+e).src=t.toDataURL()}(t)}function D(e){e&&(tt.items=e);for(var t=0;t<Ve.list.length;++t)document.getElementById("actionBarItem"+t).style.display=tt.items.indexOf(t)>=0?"inline-block":"none"}function R(){"block"==ti.style.display?(""!=ei.value&&Ge.emit("ch",ei.value),q()):(Xt.style.display="none",Rt.style.display="none",Ot.style.display="none",ti.style.display="block",ei.focus(),z())}function q(){ei.value="",ti.style.display="none"}function U(e){for(var t,i=0;i<ii.length;++i)if(e.indexOf(ii[i])>-1){t="";for(var n=0;n<ii[i].length;++n)t+=t.length?"o":"M";var s=new RegExp(ii[i],"g");e=e.replace(s,t)}return e}function O(e,t){var i=Le(e);i&&(i.chatMessage=U(t),i.chatCountdown=Oe.chatCountdown)}function W(){lt=window.innerWidth,rt=window.innerHeight;var e=Math.max(lt/ft,rt/gt);vt.width=lt,vt.height=rt,vt.style.width=lt+"px",vt.style.height=rt+"px",wt.setTransform(e,0,0,e,(lt-ft*e)/2,(rt-gt*e)/2)}function V(e){e.preventDefault(),e.stopPropagation(),mt=e.clientX,pt=e.clientY}function X(e){1!=et&&(et=1,j())}function F(e){0!=et&&(et=0,j())}function j(){tt&&tt.alive&&Ge.emit("4",et,tt.buildIndex>=0?UTILS.fixTo(ot,2):null)}function z(){$e={},Ge.emit("rk")}function G(){return"block"!=Rt.style.display&&"block"!=Xt.style.display&&"block"!=ti.style.display}function J(e){var t=e.which||e.keyCode||0;27==t?H():tt&&tt.alive&&G()&&($e[t]||($e[t]=1,69==t?N():Ve.list[t-49]?Y(tt.items[t-49]):ni[t]?_(ni[t],1):32==t&&(et=1,j())))}function Q(e){if(tt&&tt.alive){var t=e.which||e.keyCode||0;13==t?R():G()&&$e[t]&&($e[t]=0,ni[t]?_(ni[t],0):32==t&&(et=0,j()))}}function _(e,t){Ge.emit("3",e,t)}function N(){Ge.emit("7")}function Y(e){Ge.emit("5",e)}function K(){Ge.on("id",r),Ge.on("d",c),Ge.on("1",$),Ge.on("2",Te),Ge.on("4",Be),Ge.on("3",Ae),Ge.on("5",le),Ge.on("6",ke),Ge.on("7",he),Ge.on("8",Se),Ge.on("9",Pe),Ge.on("10",Ee),Ge.on("11",ee),Ge.on("12",ie),Ge.on("13",te),Ge.on("14",Ce),Ge.on("15",oe),Ge.on("16",se),Ge.on("17",D),Ge.on("ac",p),Ge.on("ad",y),Ge.on("an",u),Ge.on("st",f),Ge.on("sa",g),Ge.on("dtv",ae),Ge.on("us",C),Ge.on("ch",O),Ge.on("mm",T)}function Z(){o("moo_name",Pt.value),s()&&(h("Loading..."),Ge.emit("1",{name:Pt.value}))}function $(e){It.style.display="none",xt.style.display="block",yt.style.display="none",$e={},it=e,et=0,si&&(si=!1,ut.length=0)}function ee(){It.style.display="none",xt.style.display="block",yt.style.display="block",bt.style.display="none",H();try{factorem.refreshAds([2],!0)}catch(e){}}function te(e){tt&&Gt.removeAllItems(e)}function ie(e){Gt.disableBySid(e)}function ne(){St.innerHTML="Gold "+tt.points,Mt.innerHTML=tt.food+" Food",Tt.innerHTML=tt.wood+" Wood",Bt.innerHTML=tt.stone+" Stone"}function se(e,t){if(tt.upgradePoints=e,tt.upgrAge=t,e>0){ai.length=0;for(var i="",n=0;n<Ve.list.length;++n)Ve.list[n].age==t&&(ai.push(n),i+="<div id='upgradeItem"+n+"' class='actionBarItem' onmouseout='showItemInfo()'>"+document.getElementById("actionBarItem"+n).innerHTML+"</div>");for(var n=0;n<Ve.weapons.length;++n)if(Ve.weapons[n].age==t){var s=Ve.list.length+n;ai.push(s),i+="<div id='upgradeItem"+s+"' class='actionBarItem' onmouseout='showItemInfo()'>"+document.getElementById("actionBarItem"+s).innerHTML+"</div>"}Lt.innerHTML=i;for(var n=0;n<ai.length;++n)!function(e){var t=document.getElementById("upgradeItem"+e);t.onmouseover=function(){Ve.list[e]?d(Ve.list[e]):d(Ve.weapons[e-Ve.list.length],!0)},t.onclick=function(){Ge.emit("6",e)}}(ai[n]);ai.length?(Lt.style.display="block",Dt.style.display="block",Dt.innerHTML="SELECT ITEMS ("+e+")"):(Lt.style.display="none",Dt.style.display="none",d())}else Lt.style.display="none",Dt.style.display="none",d()}function ae(e){_t=e}function oe(e,t,i){void 0!=e&&(tt.XP=e),void 0!=t&&(tt.maxXP=t),void 0!=i&&(tt.age=i),i==Oe.maxAge?(At.innerHTML="MAX AGE",Ht.style.width="100%"):(At.innerHTML="AGE "+tt.age,Ht.style.width=tt.XP/tt.maxXP*100+"%")}function le(e){for(var t="",i=1,n=0;n<e.length;)t+="<div class='leaderHolder'><div class='leaderboardItem' style='color:"+(e[n]==it?"#fff":"rgba(255,255,255,0.6)")+"'>"+i+". "+(""!=e[n+1]?e[n+1]:"unknown")+"</div><div class='leaderScore'>"+UTILS.kFormat(e[n+2])+"</div></div>",n+=3,i++;Ct.innerHTML=t}function re(){if(Ge&&(ot=Math.atan2(pt-rt/2,mt-lt/2),(!Ze||Ke-Ze>=1e3/Oe.clientSendRate)&&(Ze=Ke,Ge.emit("2",ot))),tt){var e=UTILS.getDistance(st,at,tt.x,tt.y),t=UTILS.getDirection(tt.x,tt.y,st,at),i=Math.min(.01*e*Ye,e);e>.05?(st+=i*Math.cos(t),at+=i*Math.sin(t)):(st=tt.x,at=tt.y)}else st=Oe.mapScale/2,at=Oe.mapScale/2;for(var n,s=Ke-1e3/Oe.serverUpdateRate,a=0;a<ht.length;++a)if(nt=ht[a],nt.visible)if(nt.forcePos)nt.x=nt.x2,nt.y=nt.y2,nt.dir=nt.d2;else{var o=nt.t2-nt.t1,l=s-nt.t1,r=l/o;nt.dt+=Ye;var c=Math.min(1.5,nt.dt/160),n=nt.x2-nt.x1;nt.x=nt.x1+n*c,n=nt.y2-nt.y1,nt.y=nt.y1+n*c,nt.dir=Math.lerpAngle(nt.d2,nt.d1,r)}wt.fillStyle="#b6db66",wt.fillRect(0,0,ft,gt);var h=st-ft/2,d=at-gt/2;wt.lineWidth=4,wt.strokeStyle="#000",wt.globalAlpha=.06,wt.beginPath();for(var u=-st;u<ft;u+=gt/18)wt.moveTo(u,0),wt.lineTo(u,gt);for(var m=-at;m<gt;m+=gt/18)wt.moveTo(0,m),wt.lineTo(ft,m);if(wt.stroke(),wt.fillStyle="#000",wt.globalAlpha=.09,h<=0&&wt.fillRect(0,0,-h,gt),Oe.mapScale-h<=ft){var p=Math.max(0,-d);wt.fillRect(Oe.mapScale-h,p,ft-(Oe.mapScale-h),gt-p)}if(d<=0&&wt.fillRect(-h,0,ft+h,-d),Oe.mapScale-d<=gt){var f=Math.max(0,-h),g=0;Oe.mapScale-h<=ft&&(g=ft-(Oe.mapScale-h)),wt.fillRect(f,Oe.mapScale-d,ft-f-g,gt-(Oe.mapScale-d))}wt.globalAlpha=1,wt.strokeStyle=Jt,ce(-1,h,d),wt.globalAlpha=1;for(var a=0;a<ht.length;++a)nt=ht[a],nt.animate(Ye),nt.visible&&(t=(nt==tt?ot:nt.dir)+nt.dirPlus,wt.save(),wt.translate(nt.x-h,nt.y-d),wt.rotate(t),de(nt,wt),wt.restore());for(var a=0;a<4;++a)ce(a,h,d);wt.globalAlpha=1,_t>=1&&(wt.fillStyle="rgba(0, 0, 50, "+Math.min(.3,_t-1)+")",wt.fillRect(0,0,ft,gt));for(var a=0;a<ht.length;++a)if(nt=ht[a],nt.visible){if(10!=nt.skinIndex||nt==tt||nt.team&&nt.team==tt.team){var y=(nt.team?"["+nt.team+"] ":"")+(nt.name||"");if(""!=y&&(wt.font="30px Hammersmith One",wt.fillStyle="#fff",wt.textBaseline="middle",wt.textAlign="center",wt.lineWidth=8,wt.lineJoin="round",wt.strokeText(y,nt.x-h,nt.y-d-nt.scale-Oe.nameY),wt.fillText(y,nt.x-h,nt.y-d-nt.scale-Oe.nameY)),nt.health>0){Oe.healthBarWidth;wt.fillStyle=Jt,wt.roundRect(nt.x-h-Oe.healthBarWidth,nt.y-d+nt.scale+Oe.nameY,2*Oe.healthBarWidth,17,8),wt.fill(),wt.fillStyle=nt==tt||nt.team&&nt.team==tt.team?"#8ecc51":"#cc5151",wt.roundRect(nt.x-h-Oe.healthBarWidth+Oe.healthBarPad,nt.y-d+nt.scale+Oe.nameY+Oe.healthBarPad,2*Oe.healthBarWidth*(nt.health/nt.maxHealth)-2*Oe.healthBarPad,17-2*Oe.healthBarPad,7),wt.fill()}}if(nt.chatCountdown>0){nt.chatCountdown-=Ye,nt.chatCountdown<=0&&(nt.chatCountdown=0),wt.font="32px Hammersmith One";var v=wt.measureText(nt.chatMessage);wt.textBaseline="middle",wt.textAlign="center";var f=nt.x-h,p=nt.y-nt.scale-d-90,w=v.width+17;wt.fillStyle="rgba(0,0,0,0.2)",wt.roundRect(f-w/2,p-23.5,w,47,6),wt.fill(),wt.fillStyle="#fff",wt.fillText(nt.chatMessage,f,p)}}}function ce(e,t,i){for(var n,s,a,o=0;o<ut.length;++o)nt=ut[o],nt.active&&(s=nt.x+nt.xWiggle-t,a=nt.y+nt.yWiggle-i,0==e&&nt.update(Ye),nt.layer==e&&Me(s,a,nt.scale)&&(wt.globalAlpha=nt.hideFromEnemy?.6:1,nt.isItem?(n=fe(nt),wt.save(),wt.translate(s,a),wt.rotate(nt.dir),wt.drawImage(n,-n.width/2,-n.height/2),wt.restore()):(n=pe(nt),wt.drawImage(n,s-n.width/2,a-n.height/2))))}function he(e,t){(nt=Le(e))&&nt.startAnim(t)}function de(e,t){t=t||wt,t.lineWidth=Qt,t.lineJoin="miter";var i=Math.PI/4,n=0;if(e.buildIndex<0&&(n=Ve.weapons[e.weaponIndex].holdOffset||0,me(Ve.weapons[e.weaponIndex],e.scale,0,t)),t.fillStyle="#bf8f54",ye(e.scale*Math.cos(i),e.scale*Math.sin(i)-n,14),ye(e.scale*Math.cos(-i),e.scale*Math.sin(-i),14),e.buildIndex>=0){var s=fe(Ve.list[e.buildIndex]);t.drawImage(s,e.scale-Ve.list[e.buildIndex].holdOffset,-s.width/2)}ye(0,0,e.scale,t),e.skinIndex>0&&(t.rotate(Math.PI/2),ue(e.skinIndex,t))}function ue(e,t,i){var n=oi[e];if(!n){var s=new Image;s.src=".././img/hats/hat_"+e+".png",oi[e]=s,n=s}var a=i||li[e];if(!a){for(var o=0;o<zt.length;++o)if(zt[o].id==e){a=zt[o];break}li[e]=a}t.drawImage(n,-a.scale/2,-a.scale/2,a.scale,a.scale),!i&&a.topSprite&&ue(e+"_top",t,a)}function me(e,t,i,n,s){var a=s?.35:1;0==e.id?(n.fillStyle="#9e7543",n.roundRect(t-18*a,i-44*a,16*a,125*a,5*a),n.fill(),n.stroke(),n.fillStyle="#939393",n.roundRect(t-25*a,i+49*a,45*a,25*a,5*a),n.fill(),n.stroke()):1==e.id?(n.fillStyle="#9e7543",n.roundRect(t-18*a,i-44*a,16*a,135*a,5*a),n.fill(),n.stroke(),n.fillStyle="#939393",n.roundRect(t-25*a,i+49*a,60*a,34*a,5*a),n.fill(),n.stroke()):2==e.id&&(n.fillStyle="#9e7543",n.roundRect(t-18*a,i-44*a,16*a,125*a,5*a),n.fill(),n.stroke(),n.fillStyle="#939393",n.roundRect(t-22*a,i+40*a,25*a,75*a,4*a),n.fill(),n.stroke())}function pe(e){var t=e.type+"_"+e.scale,i=ri[t];if(!i){var n=document.createElement("canvas");n.width=n.height=2.1*e.scale+Qt;var s=n.getContext("2d");if(s.translate(n.width/2,n.height/2),s.rotate(UTILS.randFloat(0,Math.PI)),s.strokeStyle=Jt,s.lineWidth=Qt,0==e.type)for(var a=0;a<2;++a){var o=nt.scale*(a?.45:1);ve(s,7,o,.7*o),s.fillStyle=a?"#b4db62":"#9ebf57",s.fill(),a||s.stroke()}else if(1==e.type){Ie(s,6,nt.scale,.7*nt.scale),s.fillStyle="#89a54c",s.fill(),s.stroke(),s.fillStyle="#c15555";for(var l,r=_e/4,a=0;a<4;++a)l=UTILS.randInt(nt.scale/3.5,nt.scale/2.3),ye(l*Math.cos(r*a),l*Math.sin(r*a),UTILS.randInt(10,12),s)}else 2!=e.type&&3!=e.type||(s.fillStyle=2==e.type?"#939393":"#e0c655",ve(s,3,e.scale,e.scale),s.fill(),s.stroke(),s.fillStyle=2==e.type?"#bcbcbc":"#ebdca3",ve(s,3,.55*e.scale,.65*e.scale),s.fill());i=n,ri[t]=i}return i}function fe(e,t){var i=ci[e.id];if(!i||t){var n=document.createElement("canvas");n.width=n.height=2.5*e.scale+Qt+(Ve.list[e.id].spritePadding||0);var s=n.getContext("2d");if(s.translate(n.width/2,n.height/2),s.rotate(t?0:Math.PI/2),s.strokeStyle=Jt,s.lineWidth=Qt*(t?n.width/78:1),0==e.id){s.fillStyle="#c15555",ye(0,0,e.scale,s),s.fillStyle="#89a54c";var a=-Math.PI/2;ge(e.scale*Math.cos(a),e.scale*Math.sin(a),25,a+Math.PI/2,s)}else if(1==e.id){s.fillStyle="#cca861",ye(0,0,e.scale,s),s.fillStyle="#937c4b";for(var o,l=_e/4,r=0;r<4;++r)o=UTILS.randInt(e.scale/2.5,e.scale/1.7),ye(o*Math.cos(l*r),o*Math.sin(l*r),UTILS.randInt(4,5),s,!0)}else if(2==e.id||3==e.id)s.fillStyle=2==e.id?"#a5974c":"#939393",ve(s,3,1.1*e.scale,1.1*e.scale),s.fill(),s.stroke(),s.fillStyle=2==e.id?"#c9b758":"#bcbcbc",ve(s,3,.65*e.scale,.65*e.scale),s.fill();else if(4==e.id||5==e.id){s.fillStyle="#939393";var c=.6*e.scale;ve(s,4==e.id?5:6,e.scale,c),s.fill(),s.stroke(),s.fillStyle="#a5974c",ye(0,0,c,s),s.fillStyle="#c9b758",ye(0,0,c/2,s,!0)}else 6==e.id||7==e.id?(s.fillStyle="#a5974c",ye(0,0,e.scale,s),s.fillStyle="#c9b758",xe(0,0,1.5*e.scale,29,4,s),s.fillStyle="#a5974c",ye(0,0,.5*e.scale,s)):8==e.id?(s.fillStyle="#939393",ve(s,3,e.scale,e.scale),s.fill(),s.stroke(),s.fillStyle="#bcbcbc",ve(s,3,.55*e.scale,.65*e.scale),s.fill()):9==e.id?(s.fillStyle="#a5974c",ve(s,3,1.1*e.scale,1.1*e.scale),s.fill(),s.stroke(),s.fillStyle=Jt,ve(s,3,.65*e.scale,.65*e.scale),s.fill()):10==e.id&&(s.fillStyle="#7e7f82",we(0,0,2*e.scale,2*e.scale,s),s.fill(),s.stroke(),s.fillStyle="#dbd97d",be(1*e.scale,s));i=n,t||(ci[e.id]=i)}return i}function ge(e,t,i,n,s){var a=e+i*Math.cos(n),o=t+i*Math.sin(n),l=.4*i;s.moveTo(e,t),s.beginPath(),s.quadraticCurveTo((e+a)/2+l*Math.cos(n+Math.PI/2),(t+o)/2+l*Math.sin(n+Math.PI/2),a,o),s.quadraticCurveTo((e+a)/2-l*Math.cos(n+Math.PI/2),(t+o)/2-l*Math.sin(n+Math.PI/2),e,t),s.closePath(),s.fill(),s.stroke()}function ye(e,t,i,n,s){n=n||wt,n.beginPath(),n.arc(e,t,i,0,2*Math.PI),n.fill(),s||n.stroke()}function ve(e,t,i,n){var s,a,o=Math.PI/2*3,l=Math.PI/t;e.beginPath(),e.moveTo(0,-i);for(var r=0;r<t;r++)s=Math.cos(o)*i,a=Math.sin(o)*i,e.lineTo(s,a),o+=l,s=Math.cos(o)*n,a=Math.sin(o)*n,e.lineTo(s,a),o+=l;e.lineTo(0,-i),e.closePath()}function we(e,t,i,n,s){s.fillRect(e-i/2,t-n/2,i,n),s.strokeRect(e-i/2,t-n/2,i,n)}function xe(e,t,i,n,s,a){a.save(),a.translate(e,t),s=Math.ceil(s/2);for(var o=0;o<s;o++)we(0,0,2*i,n,a),a.rotate(Math.PI/s);a.restore()}function Ie(e,t,i,n){var s,a=Math.PI/2*3,o=Math.PI/t;e.beginPath(),e.moveTo(0,-n);for(var l=0;l<t;l++)s=UTILS.randInt(i+.9,1.2*i),e.quadraticCurveTo(Math.cos(a+o)*s,Math.sin(a+o)*s,Math.cos(a+2*o)*n,Math.sin(a+2*o)*n),a+=2*o;e.lineTo(0,-n),e.closePath()}function be(e,t){t=t||wt;var i=e*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(0,-i/2),t.lineTo(-e/2,i/2),t.lineTo(e/2,i/2),t.lineTo(0,-i/2),t.fill(),t.closePath()}function ke(e){for(var t=0;t<e.length;)Gt.add(e[t],e[t+1],e[t+2],e[t+3],e[t+4],e[t+5],Ve.list[e[t+6]],!0,e[t+7]>=0?{sid:e[t+7]}:null),t+=8}function Se(e,t){(nt=De(t))&&(nt.xWiggle+=Oe.gatherWiggle*Math.cos(e),nt.yWiggle+=Oe.gatherWiggle*Math.sin(e))}function Me(e,t,i){return e+i>=0&&e-i<=ft&&t+i>=0&&t-i<=gt}function Te(e,t){var i=He(e[0]);i||(i=new Fe(e[0],e[1],Oe,UTILS,Gt,Ve),ht.push(i)),i.spawn(),i.visible=!1,i.x2=void 0,i.y2=void 0,i.setData(e),t&&(tt=i,st=tt.x,at=tt.y,D(),ne(),oe(),se(0),bt.style.display="block")}function Be(e){for(var t=0;t<ht.length;t++)if(ht[t].id==e){ht.splice(t,1);break}}function Ce(e,t){tt&&(tt.itemCounts[e]=t)}function Pe(e,t,i){tt&&(tt[e]=t,i&&ne())}function Ee(e,t){(nt=Le(e))&&(nt.health=t)}function Ae(e){for(var t=Date.now(),i=0;i<ht.length;++i)ht[i].forcePos=!ht[i].visible,ht[i].visible=!1;for(var i=0;i<e.length;)nt=Le(e[i]),nt&&(nt.t1=void 0===nt.t2?t:nt.t2,nt.t2=t,nt.x1=nt.x,nt.y1=nt.y,nt.x2=e[i+1],nt.y2=e[i+2],nt.d1=void 0===nt.d2?e[i+3]:nt.d2,nt.d2=e[i+3],nt.dt=0,nt.buildIndex=e[i+4],nt.weaponIndex=e[i+5],nt.team=e[i+6],nt.skinIndex=e[i+7],nt.visible=!0),i+=8}function He(e){for(var t=0;t<ht.length;++t)if(ht[t].id==e)return ht[t];return null}function Le(e){for(var t=0;t<ht.length;++t)if(ht[t].sid==e)return ht[t];return null}function De(e){for(var t=0;t<ut.length;++t)if(ut[t].sid==e)return ut[t];return null}function Re(){Ke=Date.now(),Ye=Ke-ct,ct=Ke,re(),requestAnimFrame(Re)}function qe(){It.style.display="none",xt.style.display="block",Pt.value=l("moo_name")||"",L()}var Ue,Oe=i(0),We=i(1),Ve=i(2),Xe=(i(3),i(4)),Fe=i(5),je=i(6),ze=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("party"),Ge=null,Je=!1;const Qe=Math.PI,_e=2*Qe;Math.lerpAngle=function(e,t,i){Math.abs(t-e)>Qe&&(e>t?t+=_e:e+=_e);var n=t+(e-t)*i;return n>=0&&n<=_e?n:n%_e},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,n,s){return i<2*s&&(s=i/2),n<2*s&&(s=n/2),s<0&&(s=0),this.beginPath(),this.moveTo(e+s,t),this.arcTo(e+i,t,e+i,t+n,s),this.arcTo(e+i,t+n,e,t+n,s),this.arcTo(e,t+n,e,t,s),this.arcTo(e,t,e+i,t,s),this.closePath(),this};var Ne;"undefined"!=typeof Storage&&(Ne=!0);var Ye,Ke,Ze,$e,et,tt,it,nt,st,at,ot,lt,rt,ct=Date.now(),ht=[],dt=[],ut=[],mt=0,pt=0,ft=Oe.maxScreenWidth,gt=Oe.maxScreenHeight,yt=document.getElementById("mainMenu"),vt=document.getElementById("gameCanvas"),wt=vt.getContext("2d"),xt=document.getElementById("menuCardHolder"),It=document.getElementById("loadingText"),bt=document.getElementById("gameUI"),kt=document.getElementById("actionBar"),St=document.getElementById("scoreDisplay"),Mt=document.getElementById("foodDisplay"),Tt=document.getElementById("woodDisplay"),Bt=document.getElementById("stoneDisplay"),Ct=document.getElementById("leaderboardData"),Pt=document.getElementById("nameInput"),Et=document.getElementById("itemInfoHolder"),At=document.getElementById("ageText"),Ht=document.getElementById("ageBarBody"),Lt=document.getElementById("upgradeHolder"),Dt=document.getElementById("upgradeCounter"),Rt=document.getElementById("allianceMenu"),qt=document.getElementById("allianceHolder"),Ut=document.getElementById("allianceManager"),Ot=document.getElementById("mapHolder"),Wt=document.getElementById("mapDisplay"),Vt=Wt.getContext("2d");Wt.width=300,Wt.height=300;var Xt=document.getElementById("storeMenu"),Ft=document.getElementById("storeHolder"),jt=document.getElementById("noticationDisplay"),zt=je,Gt=new Xe(We,ut,UTILS),Jt="#525252",Qt=5.5,_t=0,Nt=document.getElementById("featuredYoutube"),Yt=[{name:"Tweak Big",link:"https://www.youtube.com/channel/UCbwvzJ38AndDTkoX8sD9YOw",cid:"UCbwvzJ38AndDTkoX8sD9YOw"},{name:"Arena Closer",link:"https://www.youtube.com/channel/UCazucVSJqW-kiHMIhQhD-QQ",cid:"UCazucVSJqW-kiHMIhQhD-QQ"},{name:"Godenot",link:"https://www.youtube.com/user/SirGodenot",cid:"UCH0-0_0XNqkg8dTLYtFaWRg"},{name:"RajNoobTV",link:"https://www.youtube.com/channel/UCVLo9brXBWrCttMaGzvm0-Q",cid:"UCVLo9brXBWrCttMaGzvm0-Q"},{name:"TomNotTom",link:"https://www.youtube.com/channel/UC7z97RgHFJRcv2niXgArBDw",cid:"UC7z97RgHFJRcv2niXgArBDw"},{name:"Nation",link:"https://www.youtube.com/channel/UCSl-MBn3qzjrIvLNESQRk-g",cid:"UCSl-MBn3qzjrIvLNESQRk-g"},{name:"Pidyohago",link:"https://www.youtube.com/channel/UC04p8Mg8nDaDx04A9is2B8Q",cid:"UC04p8Mg8nDaDx04A9is2B8Q"},{name:"Enigma",link:"https://www.youtube.com/channel/UC5HhLbs3sReHo8Bb9NDdFrg",cid:"UC5HhLbs3sReHo8Bb9NDdFrg"},{name:"Bauer",link:"https://www.youtube.com/channel/UCwU2TbJx3xTSlPqg-Ix3R1g",cid:"UCwU2TbJx3xTSlPqg-Ix3R1g"},{name:"iStealth",link:"https://www.youtube.com/channel/UCGrvlEOsQFViZbyFDE6t69A",cid:"UCGrvlEOsQFViZbyFDE6t69A"},{name:"SICKmania",link:"https://www.youtube.com/channel/UCvVI98ezn4TpX5wDMZjMa3g",cid:"UCvVI98ezn4TpX5wDMZjMa3g"},{name:"LightThief",link:"https://www.youtube.com/channel/UCj6C_tiDeATiKd3GX127XoQ",cid:"UCj6C_tiDeATiKd3GX127XoQ"},{name:"Fortish",link:"https://www.youtube.com/channel/UCou6CLU-szZA3Tb340TB9_Q",cid:"UCou6CLU-szZA3Tb340TB9_Q"},{name:"???",link:"https://www.youtube.com/channel/UCgL6J6oL8F69vm-GcPScmwg",cid:"UCgL6J6oL8F69vm-GcPScmwg"}],Kt=Yt[UTILS.randInt(0,Yt.length-1)];Nt.innerHTML="<a target='_blank' class='ytLink' href='"+Kt.link+"'><i class='material-icons' style='vertical-align: top;'>&#xE064;</i> "+Kt.name+"</a>",document.getElementById("youtubeContainer").innerHTML='<div class="g-ytsubscribe" data-channelid="'+Kt.cid+'" data-layout="default" data-count="default"></div>';window.onfocus=function(){tt&&tt.alive&&z()},window.onload=function(){n(function(e){e?c("disconnected"):(Je=!0,qe())})},vt.oncontextmenu=function(){return!1};var Zt=[],$t=[],ei=document.getElementById("chatBox"),ti=document.getElementById("chatHolder");ei.onblur=function(){q()};var ii=["cunt","whore","fuck","faggot","nigger","nigga","dick","vagina","minge","cock","rape","cum","sex","tits","penis","clit","pussy","meatcurtain","jizz","prune","douche","wanker"];window.addEventListener("resize",W),W(),vt.addEventListener("mousemove",V,!1),vt.addEventListener("mousedown",X,!1),vt.addEventListener("mouseup",F,!1);var $e={},ni={87:"u",38:"u",83:"d",40:"d",65:"l",37:"l",68:"r",39:"r"};window.addEventListener("keydown",J),window.addEventListener("keyup",Q);var si=!0,ai=[],oi={},li={},ri={},ci=[];window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),function(){var e=Oe.mapScale/2;Gt.add(0,e,e+200,0,Oe.treeScales[3],0),Gt.add(1,e,e-480,0,Oe.treeScales[3],0),Gt.add(2,e+300,e+450,0,Oe.treeScales[3],0),Gt.add(3,e-950,e-130,0,Oe.treeScales[2],0),Gt.add(4,e-750,e-400,0,Oe.treeScales[3],0),Gt.add(5,e-700,e+400,0,Oe.treeScales[2],0),Gt.add(6,e+800,e-200,0,Oe.treeScales[3],0),Gt.add(7,e-260,e+340,0,Oe.bushScales[3],1),Gt.add(8,e+760,e+310,0,Oe.bushScales[3],1),Gt.add(9,e-800,e+100,0,Oe.bushScales[3],1),Gt.add(10,e-800,e+300,0,Ve.list[3].scale,Ve.list[3].id,Ve.list[7]),Gt.add(11,e+650,e-390,0,Ve.list[3].scale,Ve.list[3].id,Ve.list[7]),Gt.add(12,e-400,e-450,0,Oe.rockScales[2],2)}(),Re(),window.toggleAllianceMenu=v,window.toggleStoreMenu=B,window.toggleMinimap=M,window.enterGame=Z,window.showParty=a,window.aJoinReq=x,window.kickFromClan=I,window.sendJoin=b,window.leaveAlliance=S,window.createAlliance=k,window.storeBuy=A,window.storeEquip=E,window.showItemInfo=d}]);
//# sourceMappingURL=bundle.js.map