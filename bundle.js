!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t){e.exports.maxScreenWidth=1920,e.exports.maxScreenHeight=1080,e.exports.serverUpdateRate=10,e.exports.maxPlayers=70,e.exports.collisionDepth=6,e.exports.minimapRate=3e3,e.exports.clientSendRate=7,e.exports.healthBarWidth=52,e.exports.healthBarPad=4.5,e.exports.iconPadding=15,e.exports.chatCountdown=3e3,e.exports.chatCooldown=500,e.exports.maxAge=15,e.exports.killScore=990,e.exports.gatherAngle=Math.PI/2.6,e.exports.gatherWiggle=10,e.exports.hitReturnRatio=.25,e.exports.hitAngle=Math.PI/2,e.exports.playerScale=35,e.exports.playerSpeed=.50,e.exports.playerDecel=.33,e.exports.nameY=34,e.exports.resourceTypes=["wood","food","stone","points"],e.exports.areaCount=7,e.exports.treesPerArea=10,e.exports.bushesPerArea=3,e.exports.totalRocks=32,e.exports.goldOres=7,e.exports.treeScales=[140,145,150,155],e.exports.bushScales=[80,85,90],e.exports.rockScales=[80,85,90],e.exports.maxNameLength=15,e.exports.mapScale=12e3},function(e,t){e.exports=function(e){this.sid=e,this.init=function(e,t,i,n,s,a,o){a=a||{},this.sentTo={},this.active=!0,this.x=e,this.y=t,this.dir=i,this.xWiggle=0,this.yWiggle=0,this.scale=n,this.type=s,this.id=a.id,this.owner=o,this.isItem=void 0!=this.id,this.group=a.group,this.health=a.health,this.layer=2,void 0!=this.group?this.layer=this.group.layer:0==this.type?this.layer=3:2==this.type&&(this.layer=0),this.colDiv=a.colDiv||1,this.ignoreCollision=a.ignoreCollision,this.hideFromEnemy=a.hideFromEnemy,this.dmg=a.dmg,this.pps=a.pps,this.turnSpeed=a.turnSpeed,this.req=a.req,this.trap=a.trap,this.boostSpeed=a.boostSpeed},this.changeHealth=function(e,t){return this.health+=e,this.health<=0},this.getScale=function(e){return e=e||1,this.scale*(this.isItem||2==this.type||3==this.type?1:.74*e)*this.colDiv},this.visibleToPlayer=function(e){return!this.hideFromEnemy||this.owner&&(this.owner==e||this.owner.team&&e.team==this.owner.team)},this.update=function(e){this.active&&(this.xWiggle&&(this.xWiggle*=Math.pow(.99,e)),this.yWiggle&&(this.yWiggle*=Math.pow(.99,e)),this.turnSpeed&&(this.dir+=this.turnSpeed*e))}}},function(e,t){e.exports.groups=[{id:0,name:"food",layer:0},{id:1,name:"walls",place:!0,limit:20,layer:0},{id:2,name:"spikes",place:!0,limit:10,layer:0},{id:3,name:"mill",place:!0,limit:5,layer:1},{id:4,name:"mine",place:!0,limit:1,layer:0},{id:5,name:"trap",place:!0,limit:5,layer:-1},{id:6,name:"booster",place:!0,limit:12,layer:-1}],t.weapons=[{id:0,name:"basic axe",desc:"tool for gathering resources",dmg:25,range:65,gather:1,speed:300},{id:1,name:"great axe",desc:"gathers resources at a higher rate",age:2,dmg:30,spdMult:1,range:70,gather:2,speed:400},{id:2,name:"short sword",desc:"increased attack power but slower gathering speed",holdOffset:5,age:2,dmg:35,spdMult:.85,range:95,gather:1,speed:300}],e.exports.list=[{id:0,group:e.exports.groups[0],name:"apple",desc:"restores 20 health when consumed",req:["food",10],consume:function(e){return e.changeHealth(20)},scale:22,holdOffset:15},{id:1,age:3,group:e.exports.groups[0],name:"cookie",desc:"restores 990 health when consumed",req:["food",15],consume:function(e){return e.changeHealth(990)},scale:27,holdOffset:15},{id:2,group:e.exports.groups[1],name:"wood wall",desc:"provides protection for your village",req:["wood",15],health:350,scale:50,holdOffset:20,placeOffset:-5},{id:3,age:3,group:e.exports.groups[1],name:"stone wall",desc:"provides improved protection for your village",req:["stone",25],health:700,scale:50,holdOffset:20,placeOffset:-5},{id:4,group:e.exports.groups[2],name:"spikes",desc:"damages enemies when they touch them",req:["wood",20,"stone",5],health:400,dmg:20,scale:49,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:5,age:5,group:e.exports.groups[2],name:"greater spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",10],health:500,dmg:40,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{id:6,group:e.exports.groups[3],name:"windmill",desc:"generates gold over time",req:["wood",50,"stone",10],health:400,pps:1,turnSpeed:.0016,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5},{id:7,age:5,group:e.exports.groups[3],name:"faster windmill",desc:"generates more gold over time",req:["wood",60,"stone",20],health:500,pps:1.5,turnSpeed:.0025,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5},{id:8,group:e.exports.groups[4],type:2,name:"mine",desc:"allows you to mine stone",req:["wood",20,"stone",100],iconLineMult:12,scale:65,holdOffset:20,placeOffset:0},{id:9,age:4,group:e.exports.groups[5],name:"pit trap",desc:"pit that traps enemies if they walk over it",req:["wood",30,"stone",30],trap:!0,ignoreCollision:!0,hideFromEnemy:!0,health:700,colDiv:.15,scale:50,holdOffset:20,placeOffset:-5},{id:10,age:4,group:e.exports.groups[6],name:"boost pad",desc:"provides boost when stepped on",req:["stone",40,"wood",5],ignoreCollision:!0,boostSpeed:300,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5}]},function(e,t){e.exports={}},function(e,t){e.exports=function(e,t,i){this.objects=t;var n;this.add=function(i,s,a,o,l,r,c,h,d){n=null;for(var u=0;u/g,"").replace(/[^\x00-\x7F]/g,""),e.name.replace(/\s/g,"").length>0&&(this.name=e.name)))},this.resetKeys=function(){this.keys={u:0,d:0,l:0,r:0}},this.getData=function(){return[this.id,this.sid,this.name,n.fixTo(this.x,2),n.fixTo(this.y,2),n.fixTo(this.dir,3),this.health,this.maxHealth,this.scale]},this.setData=function(e){this.id=e[0],this.sid=e[1],this.name=e[2],this.x=e[3],this.y=e[4],this.dir=e[5],this.health=e[6],this.maxHealth=e[7],this.scale=e[8]};var r=0;this.update=function(e,t){if(this.alive){if(this.skin&&this.skin.healthRegen&&(r-=t)<=0&&(this.changeHealth(this.skin.healthRegen),r=1e3),this.slowMult<1&&(this.slowMult+=8e-4*t,this.slowMult>1&&(this.slowMult=1)),this.lockMove)this.xVel=0,this.yVel=0;else{var o=(this.buildIndex>=0?.5:1)*(a.weapons[this.weaponIndex].spdMult||1)*(this.skin?this.skin.spdMult||1:1)*this.slowMult,l=-this.keys.l+this.keys.r,c=-this.keys.u+this.keys.d,h=Math.sqrt(l*l+c*c);0!=h&&(l/=h,c/=h),l&&(this.xVel+=l*this.speed*o*t),c&&(this.yVel+=c*this.speed*o*t)}this.lockMove=!1;for(var d=n.getDistance(0,0,this.xVel,this.yVel),u=Math.max(1,Math.round(d/30)),m=1/u,p=0;pi.mapScale&&(this.x=i.mapScale-this.scale),this.y-this.scale<0?this.y=this.scale:this.y+this.scale>i.mapScale&&(this.y=i.mapScale-this.scale),this.buildIndex<0&&(this.gatherCountdown>0?(this.gatherCountdown-=t,this.gathering=this.mouseState):(this.gathering||this.autoGather)&&this.gather(e))}},this.earnXP=function(e){this.age=this.maxXP?(this.age0&&this.health>=this.maxHealth)&&(e<0&&this.skin&&(e*=this.skin.dmgMult||1,!i&&t&&t.alive&&this.skin.dmg&&t.changeHealth(e*this.skin.dmg,this,!0)),this.health+=e,this.health>this.maxHealth&&(this.health=this.maxHealth),this.health<=0&&this.kill(t),o.emit("10",this.sid,Math.round(this.health)),!0)},this.kill=function(e){e&&l(e,i.killScore),this.alive=!1,o.to(this.id).emit("11"),s.removeAllItems(this.sid,o)},this.addResource=function(e,t){3==e?l(this,t,!0):(this[i.resourceTypes[e]]+=t,o.to(this.id).emit("9",i.resourceTypes[e],this[i.resourceTypes[e]],1))},this.changeItemCount=function(e,t){this.itemCounts[e]=this.itemCounts[e]||0,this.itemCounts[e]+=t,o.to(this.id).emit("14",e,this.itemCounts[e])},this.buildItem=function(e){var t=this.scale+e.scale+(e.placeOffset||0),n=this.x+t*Math.cos(this.dir),a=this.y+t*Math.sin(this.dir);if(this.canBuild(e)&&(e.consume||s.checkItemLocation(n,a,e.scale,.6))){var o=!1;if(e.consume?o=e.consume(this):(o=!0,e.group.limit&&this.changeItemCount(e.group.id,1),s.add(s.objects.length,n,a,this.dir,e.scale,e.type,e,!1,this)),o){for(var l=0;l=e.group.limit)return!1;for(var t=0;t0&&(this.animTime-=e,this.animTime<=0?(this.animTime=0,this.dirPlus=0,c=0,h=0):0==h?(c+=e/(a.weapons[this.weaponIndex].speed*i.hitReturnRatio),this.dirPlus=n.lerp(0,this.targetAngle,c),c>=1&&(c=1,h=1)):(c-=e/(a.weapons[this.weaponIndex].speed*(1-i.hitReturnRatio)),this.dirPlus=n.lerp(0,this.targetAngle,c)))},this.startAnim=function(e){this.animTime=a.weapons[this.weaponIndex].speed,this.targetAngle=e?-i.hitAngle:-Math.PI},this.checkCollision=function(e,t){t=t||1;var i=this.x-e.x,s=this.y-e.y,a=this.scale+(e.getScale?e.getScale():e.scale);if(Math.sqrt(i*i+s*s)";if(n+="
"+e.desc+"
",i);else if(t);else{for(var s=0;s"+e.req[s]+" x"+e.req[s+1]+"",s+=2;e.group.limit&&(n+="
"+(tt.itemCounts[e.group.id]||0)+"/"+e.group.limit+"
")}Et.innerHTML=n}else Et.style.display="none"}function u(e,t){Zt.push({sid:e,name:t}),m()}function m(){if(Zt[0]){var e=Zt[0],t="
"+e.name+"
?
?
";jt.innerHTML=t,jt.style.display="block"}else jt.style.display="none"}function p(e){dt.push(e),"block"==Rt.style.display&&w()}function f(e,t){tt&&(tt.team=e,tt.isOwner=t,"block"==Rt.style.display&&w())}function g(e){$t=e,"block"==Rt.style.display&&w()}function y(e){for(var t=dt.length-1;t>=0;t--)dt[t].sid==e&&dt.splice(t,1);"block"==Rt.style.display&&w()}function v(){z(),"block"!=Rt.style.display?w():Rt.style.display="none"}function w(){if(tt&&tt.alive){q(),Xt.style.display="none",Ot.style.display="none",Rt.style.display="block";var e,t="";if(tt.team)for(var i=0;i<$t.length;)e=tt.isOwner&&$t[i]!=tt.sid?"
Kick
":"",t+="
"+$t[i+1]+e+"
",i+=2;else if(dt.length)for(var i=0;iJoin",t+="
"+dt[i].sid+e+"
";else t+="
No Tribes Yet
";qt.innerHTML=t,t="",tt.team?t+="
"+(tt.isOwner?"Delete Tribe":"Leave Tribe")+"
":t+="
unique name
Create
",Ut.innerHTML=t}}function x(e){Ge.emit("11",Zt[0].sid,e),Zt.splice(0,1),m()}function I(e){Ge.emit("12",e)}function b(e){Ge.emit("10",dt[e].sid)}function k(){Ge.emit("8",document.getElementById("allianceInput").value)}function S(){Zt=[],m(),Ge.emit("9")}function M(){"block"!=Ot.style.display?(Ot.style.display="block",Rt.style.display="none",Xt.style.display="none",Ge.emit("mm",1)):(Ot.style.display="none",Ge.emit("mm",0))}function T(e){if(tt&&tt.alive&&"block"==Ot.style.display&&(Vt.clearRect(0,0,Wt.width,Wt.height),Vt.fillStyle="#fff",ye(tt.x/Oe.mapScale*Wt.width,tt.y/Oe.mapScale*Wt.height,4,Vt,!0),Vt.fillStyle="#d3d3d3",tt.team&&e))for(var t=0;tUnequip":"
Equip
":"
Buy
"+zt[i].price+"",t+="
"+zt[i].name+e+"
";Ft.innerHTML=t;for(var i=0;i";for(var t=0;t